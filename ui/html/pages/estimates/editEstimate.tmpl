{{ define "header-tags" }}
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/estimates/edit-estimate.css" />
    <link rel="stylesheet" href="/static/css/estimates/status-bar.css" />
    <link rel="stylesheet" href="/static/css/estimates/estimate-summary.css" />
{{ end }}

{{ define "script-tags" }}
    <script src="/static/js/estimates/edit-estimate.js"></script>
    <script src="/static/js/main.js"></script>
{{ end }}

{{ define "title" }}
    EzKitchen - Editing Estimate
    #{{ .Estimate.EstimateID }}
{{ end }}

{{ define "content" }}

    {{ template "statusBar" . }}


    <div class="main-section">
        <dialog class="product-modal" id="product-modal"></dialog>

        <div class="customer-section">
            <h3>Customer: {{ .Customer.Name }}</h3>
            <p>
                Address:
                {{ .Estimate.Street }}
                {{ .Estimate.City }}
                {{ .Estimate.State }}
                {{ .Estimate.Zip }}
            </p>
            <p>Contact: {{ .Customer.Phone }}</p>

            <table class="kitchen-details">
                <caption>
                    Kitchen Details
                </caption>
                <tr>
                    <td>Length:</td>
                    <td>{{ .Estimate.KitchenLengthInch }}in</td>
                </tr>
                <tr>
                    <td>Width:</td>
                    <td>{{ .Estimate.KitchenWidthInch }}in</td>
                </tr>
                <tr>
                    <td>Height:</td>
                    <td>{{ .Estimate.KitchenHeightInch }}in</td>
                </tr>
                <tr>
                    <td>Door Width:</td>
                    <td>{{ .Estimate.DoorWidthInch }}in</td>
                </tr>
                <tr>
                    <td>Door Height:</td>
                    <td>{{ .Estimate.DoorHeightInch }}in</td>
                </tr>
            </table>
        </div>

        <div class="items-section">
            <h1>Estimate Line Items</h1>

            <button class="accordion">
                Appliances
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <button class="subcategory-accordion">
                    Stoves
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Stove">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Stove" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn" id="Appliances">
                            Add a Stove
                        </button>
                    {{ end }}
                </div>

                <button class="subcategory-accordion">
                    Refrigerators
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Refrigerator">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Refrigerator" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn" id="Appliances">
                            Add a Fridge
                        </button>
                    {{ end }}
                </div>
            </div>

            <button class="accordion">
                Cabinetry
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <button class="subcategory-accordion">
                    Base Cabinets
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Base Cabinet">
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Base Cabinet" }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    <button class="add-product-btn" id="Cabinetry">
                        Add a Base Cabinet
                    </button>
                </div>

                <button class="subcategory-accordion">
                    Upper Cabinets
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Upper Cabinet">
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Upper Cabinet" }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    <button class="add-product-btn" id="Cabinetry">
                        Add a Upper Cabinet
                    </button>
                </div>
            </div>

            <button class="accordion">
                Countertops
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <div class="subcategory-panel" id="Countertop">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Countertop" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn">
                            Add a Countertop
                        </button>
                    {{ end }}
                </div>
            </div>

            <button class="accordion">
                Sinks & Faucets
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <button class="subcategory-accordion">
                    Sinks
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Sink">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Sink" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn">Add a Sink</button>
                    {{ end }}
                </div>

                <button class="subcategory-accordion">
                    Faucets
                    <img
                        src="/static/images/icons/modal-drop-down.svg"
                        alt="Toggle"
                        class="accordion-icon"
                    />
                </button>
                <div class="subcategory-panel" id="Faucet">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Subcategory "Faucet" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn">Add a Faucet</button>
                    {{ end }}
                </div>
            </div>

            <button class="accordion">
                Flooring
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <div class="subcategory-panel" id="Flooring">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Category "Flooring" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn" id="Flooring">
                            Choose your flooring
                        </button>
                    {{ end }}
                </div>
            </div>

            <button class="accordion">
                Backsplash
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <div class="subcategory-panel" id="Backsplash">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Category "Backsplash" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn" id="Backsplash">
                            Add a Backsplash
                        </button>
                    {{ end }}
                </div>
            </div>

            <button class="accordion">
                Misc
                <img
                    src="/static/images/icons/modal-drop-down.svg"
                    alt="Toggle"
                    class="accordion-icon"
                />
            </button>
            <div class="panel">
                <div class="subcategory-panel" id="Misc">
                    {{ $found := false }}
                    {{ range .Products }}
                        {{ if eq .Product.Category "Misc" }}
                            {{ $found = true }}
                            {{ block "productTable" . }}{{ end }}
                        {{ end }}
                    {{ end }}
                    {{ if not $found }}
                        <button class="add-product-btn" id="Misc">
                            Add any Miscellaneous Items
                        </button>
                    {{ end }}
                </div>
            </div>
        </div>

        <div class="summary-section">
            {{ template "estimateSummary" . }}
        </div>
    </div>
{{ end }}
